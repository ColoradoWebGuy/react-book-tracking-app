(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){e.exports=a(28)},24:function(e,t,a){},26:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),c=a(9),r=a.n(c),l=a(4),s=a(5),i=a(7),u=a.n(i),m=a(10),h=a(3),d=(a(24),a(11)),b=a(12),f=a(15),k=a(13),v=a(16),p=a(6),E=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(f.a)(this,Object(k.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(p.a)(Object(p.a)(a))),a}return Object(v.a)(t,e),Object(b.a)(t,[{key:"handleChange",value:function(e){var t={id:this.props.book.id,shelf:e.target.value,bookObj:this.props.book};this.props.book.shelf!==e.target.value&&this.props.onChange(t)}},{key:"render",value:function(){var e=this.props,t=e.book,a=e.myReads,n=void 0!==a&&a,c="none";return!1!==n?n.forEach(function(e){e.id===t.id&&(c=e.shelf)}):c=t.shelf,o.a.createElement("div",{className:"book",key:t.id},o.a.createElement("div",{className:"book-top"},void 0!==t.imageLinks&&void 0!==t.imageLinks.thumbnail&&0!==t.imageLinks.length&&o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundcolor:"#1c1c1c",backgroundImage:'url("'+t.imageLinks.thumbnail+'")'}}),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{value:void 0!==c?c:"none",onChange:this.handleChange},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None")))),void 0!==t.title&&o.a.createElement("div",{className:"book-title"},"".concat(t.title)),void 0!==t.authors&&o.a.createElement("div",{className:"book-authors"},"".concat(t.authors.join(", "))))}}]),t}(n.Component);var g=function(e){var t=e.library,a=e.onBookUpdate,n=function(e){a&&a(e)};return o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads")),o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},"Currently Reading"),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},t.map(function(e){return"currentlyReading"===e.shelf?o.a.createElement("li",{key:e.id},o.a.createElement(E,{book:e,onChange:function(e){return n(e)}})):""})))),o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},"Want to Read"),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},t.map(function(e){return"wantToRead"===e.shelf?o.a.createElement("li",{key:e.id},o.a.createElement(E,{book:e,onChange:function(e){return n(e)}})):""})))),o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},"Read"),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},t.map(function(e){return"read"===e.shelf?o.a.createElement("li",{key:e.id},o.a.createElement(E,{book:e,onChange:function(e){return n(e)}})):""})))))),o.a.createElement("div",{className:"open-search"},o.a.createElement(l.b,{to:"/search-books",className:"add-contact"},"Add a book")))},N=a(14),y="https://reactnd-books-api.udacity.com",j=localStorage.token;j||(j=localStorage.token=Math.random().toString(36).substr(-8));var O={Accept:"application/json",Authorization:j},C=function(){return fetch("".concat(y,"/books"),{headers:O}).then(function(e){return e.json()}).then(function(e){return e.books})},w=function(e,t){return fetch("".concat(y,"/books/").concat(e.id),{method:"PUT",headers:Object(s.a)({},O,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},R=function(e){return fetch("".concat(y,"/search"),{method:"POST",headers:Object(s.a)({},O,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})};var S=function(e){var t=e.onBookUpdate,a=e.library,c=Object(n.useState)(""),r=Object(h.a)(c,2),s=r[0],i=r[1],u=Object(n.useState)([]),m=Object(h.a)(u,2),d=m[0],b=m[1],f=function(){b([])};return o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(l.b,{to:"/",className:"close-search"},"Close"),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",placeholder:"Search by title or author",value:s,onChange:function(e){return t=e.target.value,i(t),void(""===t?f():R(t).then(function(e){void 0!==e&&e.length>0?b(Object(N.a)(e)):f()}));var t}}))),o.a.createElement("div",{className:"search-books-results"},d.length>0&&o.a.createElement("div",{className:"showing-shelf-books"},o.a.createElement("ol",{className:"books-grid"},d.map(function(e){return void 0!==e&&o.a.createElement("li",{key:e.id},o.a.createElement(E,{book:e,myReads:a,onChange:function(e){return function(e){t&&t(e)}(e)}}))})))))},T=a(0);function x(){var e=Object(n.useState)([]),t=Object(h.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)(function(){function e(){return(e=Object(m.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]);var r=function(e){var t=!1,n=a.filter(function(t){return t.id!==e.id||"none"!==e.shelf}).map(function(a){return a.id===e.id&&"none"!==e.shelf?(t=!0,Object(s.a)({},a,{shelf:e.shelf})):a});if(!t){var o=Object(s.a)({},e.bookObj,{shelf:e.shelf});n.push(o)}c(n),w(e.bookObj,e.shelf)};return o.a.createElement("div",{className:"app"},o.a.createElement(T.c,null,o.a.createElement(T.a,{path:"/",element:o.a.createElement(g,{library:a,onBookUpdate:function(e){r(e)}}),exact:!0}),o.a.createElement(T.a,{path:"/search-books",element:o.a.createElement(S,{library:a,onBookUpdate:function(e){r(e)}})})))}a(26);r.a.render(o.a.createElement(l.a,null,o.a.createElement(function(){var e=Object(T.f)();return o.a.createElement(x,{navigate:e})},null)),document.getElementById("root"))}},[[17,2,1]]]);
//# sourceMappingURL=main.2d5c156f.chunk.js.map